#!/bin/bash

# Only run on racing branch
branch=$(git rev-parse --abbrev-ref HEAD)
if [[ "$branch" != "racing" ]]; then
    echo "Not on racing branch. Skipping build."
    exit 0
fi

# Go to the root of the worktree
cd "$(git rev-parse --show-toplevel)" || exit 1

# Ensure build directory exists
mkdir -p build
cd build || exit 1

# Run build commands
echo "Running CMake build in racing/build..."
cmake ..
make -j4

